<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Overview - OpenVPN Manager</title>
<link rel="stylesheet" href="/shared/variables.css" />
<link rel="stylesheet" href="/shared/components.css" />
<link rel="stylesheet" href="/shared/sidebar.css" />
<link rel="stylesheet" href="/overview/overview.css" />
<script type="module" src="/i18n.js"></script>
<script src="/shared/theme.js"></script>
<script src="/shared/sidebar.js"></script>
<script src="/script.js"></script>
<script src="/api.js"></script>
</head>
<body class="overview-page">
<div class="toast-container"></div>


<div class="app-layout">
  <!-- Shared Sidebar Container -->
  <div class="sidebar-container"></div>

  <!-- Main Content Area -->
  <main class="main-content">
    <header class="content-header">
      <div class="page-info">
        <h1 class="page-title" data-i18n="overview.header.title">Overview</h1>
        <p class="page-subtitle" data-i18n="overview.header.subtitle">System Overview</p>
      </div>
    </header>

    <div class="dashboard-content">
      <!-- System Stats Cards (Full Width) -->
      <section class="stats-section full-width">
        <h2 class="section-title" data-i18n="overview.charts.cpu">System Statistics</h2>
        <div class="stats-grid">
        <div class="stat-card ui-card">
          <div class="stat-header">
            <div class="stat-icon storage">
              <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <rect x="2" y="3" width="20" height="14" rx="2" ry="2" stroke="currentColor" stroke-width="2" fill="none"/>
                <line x1="8" y1="21" x2="16" y2="21" stroke="currentColor" stroke-width="2"/>
                <line x1="12" y1="17" x2="12" y2="21" stroke="currentColor" stroke-width="2"/>
              </svg>
            </div>
            <div class="stat-info">
              <h3>Storage</h3>
              <p class="stat-value" id="storageValue">--</p>
            </div>
          </div>
          <div class="stat-progress">
            <div class="progress-bar">
              <div class="progress-fill storage-progress" style="width: 0%"></div>
            </div>
            <span class="progress-text" id="storagePercent" data-i18n="messages.loading">Loading...</span>
          </div>
        </div>

        <div class="stat-card ui-card">
          <div class="stat-header">
            <div class="stat-icon cpu">
              <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <rect x="4" y="4" width="16" height="16" rx="2" stroke="currentColor" stroke-width="2" fill="none"/>
                <rect x="9" y="9" width="6" height="6" stroke="currentColor" stroke-width="2" fill="none"/>
                <line x1="9" y1="1" x2="9" y2="4" stroke="currentColor" stroke-width="2"/>
                <line x1="15" y1="1" x2="15" y2="4" stroke="currentColor" stroke-width="2"/>
                <line x1="9" y1="20" x2="9" y2="23" stroke="currentColor" stroke-width="2"/>
                <line x1="20" y1="9" x2="23" y2="9" stroke="currentColor" stroke-width="2"/>
                <line x1="20" y1="14" x2="23" y2="14" stroke="currentColor" stroke-width="2"/>
                <line x1="1" y1="9" x2="4" y2="9" stroke="currentColor" stroke-width="2"/>
                <line x1="1" y1="14" x2="4" y2="14" stroke="currentColor" stroke-width="2"/>
              </svg>
            </div>
            <div class="stat-info">
              <h3>CPU</h3>
              <p class="stat-value" id="cpuValue">--</p>
            </div>
          </div>
          <div class="stat-progress">
            <div class="progress-bar">
              <div class="progress-fill cpu-progress" style="width: 0%"></div>
            </div>
            <span class="progress-text" id="cpuPercent" data-i18n="messages.loading">Loading...</span>
          </div>
        </div>

        <div class="stat-card ui-card">
          <div class="stat-header">
            <div class="stat-icon ram">
              <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M2 10h20v6a2 2 0 01-2 2H4a2 2 0 01-2-2v-6zM2 10V8a2 2 0 012-2h16a2 2 0 012 2v2" stroke="currentColor" stroke-width="2" fill="none"/>
                <line x1="6" y1="6" x2="6" y2="4" stroke="currentColor" stroke-width="2"/>
                <line x1="10" y1="6" x2="10" y2="4" stroke="currentColor" stroke-width="2"/>
                <line x1="14" y1="6" x2="14" y2="4" stroke="currentColor" stroke-width="2"/>
                <line x1="18" y1="6" x2="18" y2="4" stroke="currentColor" stroke-width="2"/>
              </svg>
            </div>
            <div class="stat-info">
              <h3>RAM</h3>
              <p class="stat-value" id="ramValue">--</p>
            </div>
          </div>
          <div class="stat-progress">
            <div class="progress-bar">
              <div class="progress-fill ram-progress" style="width: 0%"></div>
            </div>
            <span class="progress-text" id="ramPercent" data-i18n="messages.loading">Loading...</span>
          </div>
        </div>

        <div class="stat-card ui-card">
          <div class="stat-header">
            <div class="stat-icon swap">
              <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2" fill="none"/>
                <path d="M8 12l2 2 4-4" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
            </div>
            <div class="stat-info">
              <h3>SWAP</h3>
              <p class="stat-value" id="swapValue">--</p>
            </div>
          </div>
          <div class="stat-progress">
            <div class="progress-bar">
              <div class="progress-fill swap-progress" style="width: 0%"></div>
            </div>
            <span class="progress-text" id="swapPercent" data-i18n="messages.loading">Loading...</span>
          </div>
        </div>
        </div>
      </section>

      <!-- Services Status (Full Width) -->
      <section class="services-section full-width">
        <h2 class="section-title" data-i18n="services.title">Service Status</h2>
        <div class="services-grid">
          <div class="service-card ui-card" data-service="openvpn-uds-monitor">
            <div class="service-header">
              <div class="service-icon uds">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <circle cx="12" cy="12" r="3" stroke="currentColor" stroke-width="2" fill="none"/>
                  <path d="M12 1v6m0 6v6m11-7h-6m-6 0H1" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                </svg>
              </div>
              <div class="service-info">
                <h3 data-i18n="services.names.openvpn-uds-monitor">UDS Monitor</h3>
              </div>
            </div>
            <div class="service-status">
              <div class="status-indicator" id="udsStatus">
                <span class="status-dot"></span>
                <span class="status-text" data-i18n="messages.loading">Loading...</span>
              </div>
              <div class="service-uptime" id="udsUptime" data-i18n="messages.loading">Loading...</div>
            </div>
            <div class="service-actions">
              <button class="service-btn start" data-service="openvpn-uds-monitor" data-action="start" data-i18n="services.actions.start">Start</button>
              <button class="service-btn stop" data-service="openvpn-uds-monitor" data-action="stop" data-i18n="services.actions.stop">Stop</button>
              <button class="service-btn restart" data-service="openvpn-uds-monitor" data-action="restart" data-i18n="services.actions.restart">Restart</button>
            </div>
          </div>

          <div class="service-card ui-card" data-service="wireguard">
            <div class="service-header">
              <div class="service-icon wireguard">
                <img src="../image/Wireguard.svg" alt="WireGuard" width="36" height="36">
              </div>
              <div class="service-info">
                <h3 data-i18n="services.names.wireguard">WireGuard</h3>
              </div>
            </div>
            <div class="service-status">
              <div class="status-indicator" id="wireguardStatus">
                <span class="status-dot"></span>
                <span class="status-text" data-i18n="messages.loading">Loading...</span>
              </div>
              <div class="service-uptime" id="wireguardUptime" data-i18n="messages.loading">Loading...</div>
            </div>
            <div class="service-actions">
              <button class="service-btn start" data-service="wireguard" data-action="start" data-i18n="services.actions.start">Start</button>
              <button class="service-btn stop" data-service="wireguard" data-action="stop" data-i18n="services.actions.stop">Stop</button>
              <button class="service-btn restart" data-service="wireguard" data-action="restart" data-i18n="services.actions.restart">Restart</button>
            </div>
          </div>

          <div class="service-card ui-card" data-service="openvpn-server@server-login">
            <div class="service-header">
              <div class="service-icon openvpn-login">
                <img src="../image/OpenVPN.svg" alt="OpenVPN" width="36" height="36">
              </div>
              <div class="service-info">
                <h3 data-i18n="services.names.openvpn-server@server-login">OpenVPN (Login)</h3>
              </div>
            </div>
            <div class="service-status">
              <div class="status-indicator" id="loginStatus">
                <span class="status-dot"></span>
                <span class="status-text" data-i18n="messages.loading">Loading...</span>
              </div>
              <div class="service-uptime" id="loginUptime" data-i18n="messages.loading">Loading...</div>
            </div>
            <div class="service-actions">
              <button class="service-btn start" data-service="openvpn-server@server-login" data-action="start" data-i18n="services.actions.start">Start</button>
              <button class="service-btn stop" data-service="openvpn-server@server-login" data-action="stop" data-i18n="services.actions.stop">Stop</button>
              <button class="service-btn restart" data-service="openvpn-server@server-login" data-action="restart" data-i18n="services.actions.restart">Restart</button>
            </div>
          </div>

          <div class="service-card ui-card" data-service="openvpn-server@server-cert">
            <div class="service-header">
              <div class="service-icon openvpn-cert">
                <img src="../image/OpenVPN.svg" alt="OpenVPN" width="36" height="36">
              </div>
              <div class="service-info">
                <h3 data-i18n="services.names.openvpn-server@server-cert">OpenVPN (Certificate)</h3>
              </div>
            </div>
            <div class="service-status">
              <div class="status-indicator" id="certStatus">
                <span class="status-dot"></span>
                <span class="status-text" data-i18n="messages.loading">Loading...</span>
              </div>
              <div class="service-uptime" id="certUptime" data-i18n="messages.loading">Loading...</div>
            </div>
            <div class="service-actions">
              <button class="service-btn start" data-service="openvpn-server@server-cert" data-action="start" data-i18n="services.actions.start">Start</button>
              <button class="service-btn stop" data-service="openvpn-server@server-cert" data-action="stop" data-i18n="services.actions.stop">Stop</button>
              <button class="service-btn restart" data-service="openvpn-server@server-cert" data-action="restart" data-i18n="services.actions.restart">Restart</button>
            </div>
          </div>
        </div>
      </section>

      <!-- Two Column Layout for Additional Sections -->
      <div class="two-column-grid">
        
        <!-- User Statistics Card -->
        <section class="user-stats-section">
          <div class="ui-card stat-summary-card">
            <div class="card-header">
              <h3 data-i18n="overview.stats.totalUsers">Total Users</h3>
              <div class="stat-icon users">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path d="M17 21v-2a4 4 0 00-4-4H5a4 4 0 00-4 4v2M9 11a4 4 0 100-8 4 4 0 000 8zM23 21v-2a4 4 0 00-3-3.87M16 3.13a4 4 0 010 7.75" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
              </div>
            </div>
            <div class="card-body">
              <div class="user-stats-grid">
                <div class="user-stat-item">
                  <span class="user-stat-number" id="totalUsers">--</span>
                  <span class="user-stat-label" data-i18n="overview.stats.totalUsers">Total Users</span>
                </div>
                <div class="user-stat-item">
                  <span class="user-stat-number" id="activeConnections">--</span>
                  <span class="user-stat-label" data-i18n="overview.stats.activeConnections">Active Connections</span>
                </div>
                <div class="user-stat-item">
                  <span class="user-stat-number" id="onlineUsers">--</span>
                  <span class="user-stat-label" data-i18n="online_label">Online</span>
                </div>
                <div class="user-stat-item">
                  <span class="user-stat-number" id="totalUsage">--</span>
                  <span class="user-stat-label" data-i18n="overview.stats.totalUsage">Total Usage</span>
                </div>
              </div>
            </div>
          </div>
        </section>

        <!-- System Uptime Card -->
        <section class="uptime-section">
          <div class="ui-card stat-summary-card">
            <div class="card-header">
              <h3 data-i18n="overview.stats.systemUptime">System Uptime</h3>
              <div class="stat-icon uptime">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/>
                  <polyline points="12,6 12,12 16,14" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
              </div>
            </div>
            <div class="card-body">
              <div class="uptime-stats-grid">
                <div class="uptime-stat-item">
                  <span class="uptime-stat-number" id="systemUptime">--</span>
                  <span class="uptime-stat-label" data-i18n="uptime">Uptime</span>
                </div>
                <div class="uptime-stat-item">
                  <span class="uptime-stat-number" id="lastBoot">--</span>
                  <span class="uptime-stat-label">Last Boot</span>
                </div>
              </div>
            </div>
          </div>
        </section>

        <!-- Logs Section -->
        <section class="logs-section">
          <div class="ui-card">
            <div class="card-header">
              <h3 data-i18n="logs.title">Logs</h3>
              <div class="stat-icon logs">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path d="M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V8z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                  <polyline points="14,2 14,8 20,8" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                  <line x1="16" y1="13" x2="8" y2="13" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                  <line x1="16" y1="17" x2="8" y2="17" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                </svg>
              </div>
            </div>
            <div class="card-body">
              <div class="logs-grid">
                <button class="log-btn" data-service="openvpn" data-i18n="logs.services.openvpn">OpenVPN Logs</button>
                <button class="log-btn" data-service="wireguard" data-i18n="logs.services.wireguard">WireGuard Logs</button>
                <button class="log-btn" data-service="uds" data-i18n="logs.services.uds">UDS Monitor Logs</button>
                <button class="log-btn" data-service="system" data-i18n="logs.services.system">System Logs</button>
              </div>
            </div>
          </div>
        </section>

        <!-- Backup & Restore Section -->
        <section class="backup-section">
          <div class="ui-card">
            <div class="card-header">
              <h3 data-i18n="backup.title">Backup & Restore</h3>
              <div class="stat-icon backup">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4M7 10l5 5 5-5M12 15V3" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
              </div>
            </div>
            <div class="card-body">
              <div class="backup-actions">
                <button class="backup-btn create" id="createBackup" data-i18n="backup.create">Create Backup</button>
                <button class="backup-btn restore" id="restoreBackup" data-i18n="backup.restore">Restore</button>
              </div>
              <div class="backup-info">
                <small class="backup-note">Last Backup: <span id="lastBackup">--</span></small>
              </div>
            </div>
          </div>
        </section>

      </div>
    </div>
  </main>
</div>

<!-- Log Modal -->
<div id="logModal" class="modal">
  <div class="modal-content">
    <div class="modal-header">
      <h3 id="logModalTitle" data-i18n="logs.modal.title">View Logs</h3>
      <button class="modal-close" id="closeLogModal">&times;</button>
    </div>
    <div class="modal-body">
      <div class="log-controls">
        <button class="log-control-btn" id="refreshLog" data-i18n="logs.modal.refresh">Refresh</button>
        <button class="log-control-btn" id="liveLog" data-i18n="logs.modal.live">Live Tail</button>
        <button class="log-control-btn" id="downloadLog" data-i18n="logs.modal.downloadTxt">Download TXT</button>
      </div>
      <div class="log-content">
        <pre id="logOutput" data-i18n="logs.modal.loading">Loading...</pre>
      </div>
    </div>
  </div>
</div>

<!-- Password Dialog -->
<div id="passwordDialog" class="modal">
  <div class="modal-content small">
    <div class="modal-header">
      <h3 id="passwordTitle"></h3>
      <button class="modal-close" id="closePasswordDialog">&times;</button>
    </div>
    <div class="modal-body">
      <form id="passwordForm">
        <div class="input-group">
          <label for="password" data-i18n="backup.prompt.password">Password</label>
          <input type="password" id="password" required>
        </div>
        <div class="checkbox-group" id="rememberGroup" style="display: none;">
          <input type="checkbox" id="rememberPassword">
          <label for="rememberPassword" data-i18n="backup.prompt.rememberPassword">Remember this password for future backups?</label>
        </div>
        <div class="button-group">
          <button type="button" class="btn-secondary" id="cancelPassword" data-i18n="messages.cancel">Cancel</button>
          <button type="submit" class="btn-primary" data-i18n="messages.confirm">Confirm</button>
        </div>
      </form>
    </div>
  </div>
</div>

<!-- File Upload Dialog -->
<div id="fileDialog" class="modal">
  <div class="modal-content small">
    <div class="modal-header">
      <h3 data-i18n="restore.prompt.selectFile">Choose Backup File</h3>
      <button class="modal-close" id="closeFileDialog">&times;</button>
    </div>
    <div class="modal-body">
      <form id="fileForm">
        <div class="input-group">
          <input type="file" id="restoreFile" accept=".sql,.db,.backup" required>
        </div>
        <div class="button-group">
          <button type="button" class="btn-secondary" id="cancelFile" data-i18n="messages.cancel">Cancel</button>
          <button type="submit" class="btn-primary" data-i18n="messages.confirm">Confirm</button>
        </div>
      </form>
    </div>
  </div>
</div>

<!-- Confirmation Dialog -->
<div id="confirmDialog" class="modal">
  <div class="modal-content small">
    <div class="modal-header">
      <h3 id="confirmTitle" data-i18n="messages.confirm">Confirm</h3>
      <button class="modal-close" id="closeConfirmDialog">&times;</button>
    </div>
    <div class="modal-body">
      <p id="confirmMessage"></p>
      <div class="button-group">
        <button type="button" class="btn-secondary" id="cancelConfirm" data-i18n="messages.cancel">Cancel</button>
        <button type="button" class="btn-primary" id="confirmAction" data-i18n="messages.confirm">Confirm</button>
      </div>
    </div>
  </div>
</div>

<script src="/overview/overview.js"></script>
</body>
</html>